---
// src/pages/index.astro
import Layout from '../layouts/Layout.astro';
import config from '../document/config.json';

const { hero, philosophy, projects, site_meta } = config;
---

<Layout title={`${config.identity.name} | ${config.identity.role}`}>
  
  <section class="min-h-[80vh] flex flex-col justify-center items-start space-y-8 relative">
    
    <div class="font-mono text-emerald-500 text-xs mb-4 p-2 bg-emerald-950/30 border border-emerald-900 rounded inline-block">
      > initializing nexus_core... <span class="animate-pulse">_</span>
    </div>

    <h1 
      class="text-5xl md:text-7xl font-bold tracking-tight leading-tight max-w-4xl text-white"
      set:html={hero.headline}
    />

    <p class="text-xl text-slate-400 max-w-2xl leading-relaxed">
      {hero.subheadline}
    </p>

    <div class="flex flex-wrap gap-4 pt-4">
      <a 
        href={hero.cta_primary.link} 
        class="px-8 py-3 bg-indigo-600 hover:bg-indigo-500 text-white font-mono rounded-sm transition-all hover:shadow-[0_0_20px_rgba(79,70,229,0.4)]"
      >
        {hero.cta_primary.label}
      </a>
      <a 
        href={hero.cta_secondary.link} 
        target="_blank"
        class="px-8 py-3 border border-slate-700 hover:border-slate-500 text-slate-300 font-mono rounded-sm transition-all"
      >
        {hero.cta_secondary.label}
      </a>
    </div>

    <div class="absolute top-1/2 right-0 -z-10 w-[500px] h-[500px] bg-indigo-900/20 rounded-full blur-[100px] opacity-50 pointer-events-none"></div>
  </section>

  <section class="py-20 border-t border-slate-900">
    <div class="flex items-end justify-between mb-12">
      <h2 class="text-3xl font-bold text-white">{philosophy.title}</h2>
      <span class="hidden md:inline text-slate-600 font-mono text-sm">src/philosophy/core_values.json</span>
    </div>

    <div class="grid md:grid-cols-3 gap-8">
      {philosophy.pillars.map((pillar) => (
        <div class="p-6 border border-slate-800 bg-slate-900/20 hover:border-emerald-500/50 transition-colors group">
          <div class="w-10 h-10 mb-6 text-emerald-400 group-hover:scale-110 transition-transform">
            {pillar.icon === 'cpu' && (
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12h1.5m-1.5 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 0 0 2.25-2.25V6.75a2.25 2.25 0 0 0-2.25-2.25H6.75A2.25 2.25 0 0 0 4.5 6.75v10.5a2.25 2.25 0 0 0 2.25 2.25Zm.75-12h9v9h-9v-9Z" /></svg>
            )}
            {pillar.icon === 'cloud' && (
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8"><path stroke-linecap="round" stroke-linejoin="round" d="M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z" /></svg>
            )}
            {pillar.icon === 'rss' && (
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8"><path stroke-linecap="round" stroke-linejoin="round" d="M12.75 19.5v-.75a7.5 7.5 0 0 0-7.5-7.5H4.5m0-6.75h.75c7.87 0 14.25 6.38 14.25 14.25v.75M6 18.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z" /></svg>
            )}
          </div>
          <h3 class="text-xl font-bold mb-3 text-slate-100">{pillar.title}</h3>
          <p class="text-slate-400 leading-relaxed text-sm">{pillar.desc}</p>
        </div>
      ))}
    </div>
  </section>

  <section class="py-20 border-t border-slate-900">
    <h2 class="text-3xl font-bold text-white mb-12">Flagship Units</h2>
    
    <div class="space-y-12">
      {projects.slice(0, 2).map((project, index) => (
        <article class={`flex flex-col md:flex-row gap-8 items-start group ${index % 2 === 1 ? 'md:flex-row-reverse' : ''}`}>
          
          <div class="w-full md:w-1/2 aspect-video bg-slate-900 border border-slate-800 rounded overflow-hidden relative">
            <div class="absolute inset-0 flex items-center justify-center text-slate-600 font-mono text-xs z-0">
               Image Loading from: {site_meta.external_asset_host}...
            </div>
            <img 
              src={`${site_meta.external_asset_host}${project.media.thumbnail}`} 
              alt={project.title}
              class="absolute inset-0 w-full h-full object-cover opacity-70 group-hover:opacity-100 group-hover:scale-105 transition-all duration-500 z-10"
              loading="lazy"
            />
          </div>

          <div class="w-full md:w-1/2 space-y-4">
            <div class="flex items-center gap-3">
              <span class="text-xs font-mono text-emerald-400 border border-emerald-900 bg-emerald-950/50 px-2 py-1 rounded">
                {project.status}
              </span>
              <span class="text-xs font-mono text-slate-500">{project.category}</span>
            </div>
            
            <h3 class="text-2xl font-bold text-white group-hover:text-emerald-400 transition-colors">
              {project.title}
            </h3>
            
            <p class="text-slate-400 leading-relaxed">
              {project.description}
            </p>

            <div class="grid grid-cols-2 gap-2 my-4">
              {project.results.map((r) => (
                <div class="text-xs font-mono text-slate-300 border-l-2 border-slate-700 pl-2">
                  {r}
                </div>
              ))}
            </div>

            <div class="flex gap-2 pt-2">
              {project.stack.map((tech) => (
                <span class="text-xs text-slate-500 bg-slate-900 px-2 py-1 rounded">{tech}</span>
              ))}
            </div>
          </div>
        </article>
      ))}
    </div>

    <div class="mt-12 text-center">
      <a href="/projects" class="inline-flex items-center gap-2 font-mono text-emerald-400 hover:underline">
        View all projects <span>-></span>
      </a>
    </div>
  </section>

</Layout>
